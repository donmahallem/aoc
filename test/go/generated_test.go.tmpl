// Code generated by testgen. DO NOT EDIT.
package {{.GoPackage}}_test

import (
{{- if .HasSamples}}
	"io"
	"strings"
{{- end}}
{{- if .HasArrayResult}}
	"slices"
{{- end}}
	"testing"

	"github.com/donmahallem/aoc/go/{{.YearPkg}}/{{.GoPackage}}"
	"github.com/donmahallem/aoc/go/test_utils"
)
{{range .InlineSamples}}
var {{.VarName}} = {{backtick}}{{.Input}}{{backtick}}
{{end}}
{{- if .Part1}}
func TestPart1(t *testing.T) {
{{- range .Part1.Samples}}
	t.Run("{{.Name}}", func(t *testing.T) {
		result, err := {{$.GoPackage}}.Part1(strings.NewReader({{.VarName}}))
		if err != nil {
			t.Fatalf("Unexpected error: %v", err)
		}
{{- if .IsArray}}
		expected := {{.Expected}}
		if !slices.Equal(result, expected) {
			t.Errorf("Expected %v, got %v", expected, result)
		}
{{- else}}
		if result != {{.Expected}} {
			t.Errorf("Expected %v, got %v", {{.Expected}}, result)
		}
{{- end}}
	})
{{end}}
{{- range .Part1.Files}}
	t.Run("{{.Name}}", func(t *testing.T) {
		result, ok := test_utils.TestPartFromPath(t, "{{.FilePath}}", {{$.GoPackage}}.Part1)
		if !ok {
			return
		}
{{- if .IsArray}}
		expected := {{.Expected}}
		if !slices.Equal(result, expected) {
			t.Errorf("Expected %v, got %v", expected, result)
		}
{{- else}}
		if result != {{.Expected}} {
			t.Errorf("Expected %v, got %v", {{.Expected}}, result)
		}
{{- end}}
	})
{{end -}}
}

func BenchmarkPart1(b *testing.B) {
{{- range .Part1.Samples}}
	b.Run("{{.Name}}", func(b *testing.B) {
		reader := strings.NewReader({{.VarName}})
		for b.Loop() {
			reader.Seek(0, io.SeekStart)
			{{$.GoPackage}}.Part1(reader)
		}
	})
{{end}}
{{- range .Part1.Files}}
	b.Run("{{.Name}}", func(b *testing.B) {
		test_utils.BenchmarkPartFromPath(b, "{{.FilePath}}", {{$.GoPackage}}.Part1)
	})
{{end -}}
}
{{end}}
{{- if .Part2}}
func TestPart2(t *testing.T) {
{{- range .Part2.Samples}}
	t.Run("{{.Name}}", func(t *testing.T) {
		result, err := {{$.GoPackage}}.Part2(strings.NewReader({{.VarName}}))
		if err != nil {
			t.Fatalf("Unexpected error: %v", err)
		}
{{- if .IsArray}}
		expected := {{.Expected}}
		if !slices.Equal(result, expected) {
			t.Errorf("Expected %v, got %v", expected, result)
		}
{{- else}}
		if result != {{.Expected}} {
			t.Errorf("Expected %v, got %v", {{.Expected}}, result)
		}
{{- end}}
	})
{{end}}
{{- range .Part2.Files}}
	t.Run("{{.Name}}", func(t *testing.T) {
		result, ok := test_utils.TestPartFromPath(t, "{{.FilePath}}", {{$.GoPackage}}.Part2)
		if !ok {
			return
		}
{{- if .IsArray}}
		expected := {{.Expected}}
		if !slices.Equal(result, expected) {
			t.Errorf("Expected %v, got %v", expected, result)
		}
{{- else}}
		if result != {{.Expected}} {
			t.Errorf("Expected %v, got %v", {{.Expected}}, result)
		}
{{- end}}
	})
{{end -}}
}

func BenchmarkPart2(b *testing.B) {
{{- range .Part2.Samples}}
	b.Run("{{.Name}}", func(b *testing.B) {
		reader := strings.NewReader({{.VarName}})
		for b.Loop() {
			reader.Seek(0, io.SeekStart)
			{{$.GoPackage}}.Part2(reader)
		}
	})
{{end}}
{{- range .Part2.Files}}
	b.Run("{{.Name}}", func(b *testing.B) {
		test_utils.BenchmarkPartFromPath(b, "{{.FilePath}}", {{$.GoPackage}}.Part2)
	})
{{end -}}
}
{{end}}
